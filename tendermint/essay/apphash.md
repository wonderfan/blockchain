# App Hash In Tendermint

## What is apphash?
应用哈希值是对应用状态的计算哈希。每一个区块罗盘之后，都会产生一个应用哈希值，区块和区块交易的应用哈希值是一一对应的关系。在链初始化
的时候，从应用的接口中获取初始的应用哈希值。初始状态的应用哈希值为空值或者是验证者签名集合的哈希值。

## How to express apphash?
应用哈希值是区块头的组成部分，是区块头数据结构中的一个字段，是对应用状态取哈希值，是一个字节数组类型,可以使用16进制形式来表示。

## How to calculate apphash?
应用哈希值在计算区块的时候进行填充，作为一个状态数据进行存储。构建区块的时候，会对区块头进行构建，赋值区块头中的应用哈希字段。
区块执行提交之后产生一个新的应用哈希值。ABCI应用提交方法执行的返回值是应用哈希值。区块执行之后，新的应用哈希值会更新到当前的状态之中。
应用哈希值和区块罗盘是原子互生的关系。

## How to use apphash?
节点收到区块之后展开对区块的验证，分别从内部和外部进行验证一致性。内部的验证是验证区块内部数据之间的逻辑和数量关系。
外部验证是使用区块和当前状态两个方面的数据进行比对和逻辑计算。
区块中的应用哈希值和状态对象的哈希值是否相等为判断区块的核心条件。执行区块之前需要对区块的有效性进行验证。

## How to solve or diagnose when apphash does not match?
